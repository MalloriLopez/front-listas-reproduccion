<div class="container mt-4">
    <h2 class="mb-4 text-center titulo-morado">Agrega listas de reproducción</h2>
    <form [formGroup]="listaForm" (ngSubmit)="enviarLista()" class="mb-4">
      <div class="row mb-3">
        <div class="col-md-6 mb-2">
          <label class="form-label">Nombre</label>
          <input formControlName="nombre" class="form-control" placeholder="Ej: Favorita" />
          <div *ngIf="listaForm.get('nombre')?.touched && listaForm.get('nombre')?.invalid" class="text-danger small">
            Nombre es requerido
          </div>
        </div>
        <div class="col-md-6 mb-2">
          <label class="form-label">Descripción</label>
          <input formControlName="descripcion" class="form-control" placeholder="Ej: Música que me encanta" />
          <div *ngIf="listaForm.get('descripcion')?.touched && listaForm.get('descripcion')?.invalid" class="text-danger small">
            Descripción es requerida
          </div>
        </div>
      </div>
  
      <div formArrayName="canciones">
        <div *ngFor="let cancion of canciones.controls; let i=index" [formGroupName]="i" class="border rounded p-3 mb-3">
          <div class="row g-2 align-items-end">
            <div class="col-md-3">
              <label class="form-label">Título</label>
              <input formControlName="titulo" class="form-control" placeholder="Título" />
            </div>
            <div class="col-md-3">
              <label class="form-label">Artista</label>
              <input formControlName="artista" class="form-control" placeholder="Artista" />
            </div>
            <div class="col-md-2">
              <label class="form-label">Álbum</label>
              <input formControlName="album" class="form-control" placeholder="Álbum" />
            </div>
            <div class="col-md-2">
              <label class="form-label">Año</label>
              <input formControlName="anno" class="form-control" placeholder="Año" />
            </div>
            <div class="col-md-2">
              <label class="form-label">Género</label>
              <input formControlName="genero" class="form-control" placeholder="Género" />
            </div>
            <div class="col-12 mt-2 text-end">
              <button type="button" class="btn-morado" (click)="eliminarCancion(i)">
                <i class="bi bi-trash"></i> Eliminar
              </button>
            </div>
          </div>
        </div>
        <div class="d-flex justify-content-between align-items-center">
          <button 
            type="button" 
            class="btn-morado"
            (click)="agregarCancion()"
            [disabled]="!listaForm.get('nombre')?.value">
            <i class="bi bi-plus"></i> 
            AGREGAR CANCIÓN
          </button>
          <button 
            type="submit" 
            class="btn-morado"
            [disabled]="!listaForm.get('nombre')?.value || canciones.length === 0">
            CREAR LISTA
          </button>
        </div>
      </div>
    </form>
  </div>
  